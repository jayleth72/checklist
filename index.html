<!DOCTYPE html>
<html>
<head>
    <style>
        /* Basic styling to make it look like a table */
        table { 
            border-collapse: collapse; 
            width: 100%; 
            font-family: Arial, sans-serif;
            table-layout: fixed; /* Fixes column widths to prevent squishing */
        }
        
        /* Ensure column lines are visible in head and body */
        th, td { 
            border: 1px solid #000; 
            padding: 4px;
            vertical-align: middle;
        }

        /* Header styling */
        th {
            background-color: #f2f2f2;
            text-align: center;
            font-size: 14px;
            vertical-align: bottom; /* Aligns "Item/Task" to bottom if tall */
        }

        /* Column Widths - Adjusted for 16 total columns */
        .col-item { width: 16%; } /* Narrowed to fit the extra artist columns */
        .col-check { width: auto; text-align: center; } /* Auto width distributes remaining space */
        
        /* Parent header styling */
        .parent-header {
            color: #333;
            vertical-align: top;
            padding: 8px 4px;
        }

        /* Container for the header details (Hours, Artist, etc) */
        .header-details {
            display: flex;
            flex-direction: column;
            gap: 4px;
            text-align: left;
            font-size: 10px;
        }

        .header-row {
            display: flex;
            flex-direction: column; /* Stack label and input for space */
        }

        /* New class for rows with 3 columns */
        .input-group-3 {
            display: flex;
            gap: 4px;
            width: 100%;
        }

        /* Editable Label Styling */
        .header-label-input {
            font-weight: bold;
            text-transform: uppercase;
            font-size: 9px;
            color: #000;
            border: none;
            background: transparent;
            width: 100%;
            margin-bottom: 1px;
            padding: 0;
            font-family: inherit;
            cursor: text;
        }
        
        .header-label-input:focus {
            outline: none;
            background-color: #fff; /* White background when editing */
            color: #000;
        }
        
        /* Static label for non-editable areas */
        .header-label-static {
            font-weight: bold;
            text-transform: uppercase;
            font-size: 9px;
            color: #000;
            margin-bottom: 1px;
            display: block;
        }

        /* Input field styling for seamless editing */
        .task-input {
            width: 100%;
            height: 100%;
            border: none;
            outline: none;
            padding: 8px;
            font-family: inherit;
            font-size: 14px;
            box-sizing: border-box;
            background: transparent;
            text-transform: uppercase;
        }

        .header-input {
            width: 100%;
            border: none;
            border-bottom: 1px solid #ccc; /* Line for writing on */
            background: #fff; /* Pure white background (lighter) */
            font-family: inherit;
            font-size: 11px;
            padding: 2px 0;
            outline: none;
            text-transform: uppercase;
            color: #000;
        }

        /* Style for the split inputs to center text */
        .input-group-3 .header-input {
            text-align: center;
        }
        
        .header-input:focus {
            border-bottom: 1px solid #000;
        }

        /* Remove padding from the cell containing the input so the input fills it */
        td.input-cell {
            padding: 0;
        }
        
        /* Rotated text for very narrow columns if needed, or small font */
        .tiny-header {
            font-size: 8px; /* Reduced from 10px to fit */
            padding: 1px;   /* Reduced padding to maximize space */
            overflow: hidden;
            white-space: nowrap;
            text-overflow: clip;
        }

        /* Checkbox styling */
        .task-checkbox {
            width: 14px;
            height: 14px;
            cursor: pointer;
            vertical-align: middle;
        }
    </style>
</head>
<body>

    <table>
        <thead>
            <!-- Top Header Row containing the details -->
            <tr>
                <!-- Item/Task spans 2 rows -->
                <th rowspan="2" class="col-item">Item/Task</th>
                
                <!-- LOOP BLOCK 1 -->
                <th colspan="3" class="parent-header">
                    <div class="header-details">
                        <div class="header-row">
                            <input type="text" class="header-label-input" value="ARTIST">
                            <div class="input-group-3">
                                <input class="header-input">
                                <input class="header-input">
                                <input class="header-input">
                            </div>
                        </div>
                        <div class="header-row">
                            <input type="text" class="header-label-input" value="HOURS">
                            <div class="input-group-3">
                                <input class="header-input">
                                <input class="header-input">
                                <input class="header-input">
                            </div>
                        </div>
                        <div class="header-row"><input type="text" class="header-label-input" value="DATE"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="TIME"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="EVENT"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="CASH SALES"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="TERMINAL SALES"><input class="header-input"></div>
                    </div>
                </th>

                <!-- LOOP BLOCK 2 -->
                <th colspan="3" class="parent-header">
                    <div class="header-details">
                        <div class="header-row">
                            <input type="text" class="header-label-input" value="ARTIST">
                            <div class="input-group-3">
                                <input class="header-input">
                                <input class="header-input">
                                <input class="header-input">
                            </div>
                        </div>
                        <div class="header-row">
                            <input type="text" class="header-label-input" value="HOURS">
                            <div class="input-group-3">
                                <input class="header-input">
                                <input class="header-input">
                                <input class="header-input">
                            </div>
                        </div>
                        <div class="header-row"><input type="text" class="header-label-input" value="DATE"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="TIME"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="EVENT"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="CASH SALES"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="TERMINAL SALES"><input class="header-input"></div>
                    </div>
                </th>

                <!-- LOOP BLOCK 3 -->
                <th colspan="3" class="parent-header">
                    <div class="header-details">
                        <div class="header-row">
                            <input type="text" class="header-label-input" value="ARTIST">
                            <div class="input-group-3">
                                <input class="header-input">
                                <input class="header-input">
                                <input class="header-input">
                            </div>
                        </div>
                        <div class="header-row">
                            <input type="text" class="header-label-input" value="HOURS">
                            <div class="input-group-3">
                                <input class="header-input">
                                <input class="header-input">
                                <input class="header-input">
                            </div>
                        </div>
                        <div class="header-row"><input type="text" class="header-label-input" value="DATE"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="TIME"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="EVENT"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="CASH SALES"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="TERMINAL SALES"><input class="header-input"></div>
                    </div>
                </th>

                <!-- LOOP BLOCK 4 -->
                <th colspan="3" class="parent-header">
                    <div class="header-details">
                        <div class="header-row">
                            <input type="text" class="header-label-input" value="ARTIST">
                            <div class="input-group-3">
                                <input class="header-input">
                                <input class="header-input">
                                <input class="header-input">
                            </div>
                        </div>
                        <div class="header-row">
                            <input type="text" class="header-label-input" value="HOURS">
                            <div class="input-group-3">
                                <input class="header-input">
                                <input class="header-input">
                                <input class="header-input">
                            </div>
                        </div>
                        <div class="header-row"><input type="text" class="header-label-input" value="DATE"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="TIME"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="EVENT"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="CASH SALES"><input class="header-input"></div>
                        <div class="header-row"><input type="text" class="header-label-input" value="TERMINAL SALES"><input class="header-input"></div>
                    </div>
                </th>

                <!-- LOOP BLOCK 5: ARTIST EQUIPMENT -->
                <th colspan="3" class="parent-header" style="vertical-align: middle;">
                    <span class="header-label-static" style="font-size: 11px;">ARTIST WITH EQUIPMENT</span>
                </th>
            </tr>

            <!-- Second Header Row (Sub-columns) -->
            <tr>
                <!-- Group 1 -->
                <th class="col-check tiny-header">Packed</th>
                <th class="col-check tiny-header">In Car</th>
                <th class="col-check tiny-header">Restock</th>
                
                <!-- Group 2 -->
                <th class="col-check tiny-header">Packed</th>
                <th class="col-check tiny-header">In Car</th>
                <th class="col-check tiny-header">Restock</th>
                
                <!-- Group 3 -->
                <th class="col-check tiny-header">Packed</th>
                <th class="col-check tiny-header">In Car</th>
                <th class="col-check tiny-header">Restock</th>

                <!-- Group 4 -->
                <th class="col-check tiny-header">Packed</th>
                <th class="col-check tiny-header">In Car</th>
                <th class="col-check tiny-header">Restock</th>

                <!-- Group 5: Artist Equipment Sub-columns -->
                <th class="col-check tiny-header">AMY</th>
                <th class="col-check tiny-header">VEGAS</th>
                <th class="col-check tiny-header">MEL</th>
            </tr>
        </thead>
        <tbody id="tableBody">
            <!-- The script below will generate the rows here -->
        </tbody>
    </table>

    <script>
        // --- CONFIGURATION ---
        const numberOfRows = 25; // Change this to add more lines
        // ---------------------

        // Row HTML matching the 16 columns structure (1 Task + 5 Groups of 3)
        const rowHtml = `
        <tr>
            <td class="input-cell"><input type="text" class="task-input" placeholder=""></td> 
            
            <!-- Group 1 -->
            <td style="text-align: center;"><input type="checkbox" class="task-checkbox"></td>
            <td style="text-align: center;"><input type="checkbox" class="task-checkbox"></td>
            <td style="text-align: center;"><input type="checkbox" class="task-checkbox"></td>

            <!-- Group 2 -->
            <td style="text-align: center;"><input type="checkbox" class="task-checkbox"></td>
            <td style="text-align: center;"><input type="checkbox" class="task-checkbox"></td>
            <td style="text-align: center;"><input type="checkbox" class="task-checkbox"></td>

            <!-- Group 3 -->
            <td style="text-align: center;"><input type="checkbox" class="task-checkbox"></td>
            <td style="text-align: center;"><input type="checkbox" class="task-checkbox"></td>
            <td style="text-align: center;"><input type="checkbox" class="task-checkbox"></td>

            <!-- Group 4 -->
            <td style="text-align: center;"><input type="checkbox" class="task-checkbox"></td>
            <td style="text-align: center;"><input type="checkbox" class="task-checkbox"></td>
            <td style="text-align: center;"><input type="checkbox" class="task-checkbox"></td>

            <!-- Group 5: Artist Equipment -->
            <td style="text-align: center;"><input type="checkbox" class="task-checkbox"></td>
            <td style="text-align: center;"><input type="checkbox" class="task-checkbox"></td>
            <td style="text-align: center;"><input type="checkbox" class="task-checkbox"></td>
        </tr>`;

        let allRows = "";
        
        for (let i = 0; i < numberOfRows; i++) {
            allRows += rowHtml;
        }

        document.getElementById('tableBody').innerHTML = allRows;

        // --- SAVE/LOAD FUNCTIONALITY ---

        // Helper function to handle saving for TEXT inputs
        function setupAutoSave(selector, storagePrefix) {
            const inputs = document.querySelectorAll(selector);
            
            inputs.forEach((input, index) => {
                const key = storagePrefix + index;
                const savedValue = localStorage.getItem(key);
                
                if (savedValue) {
                    input.value = savedValue;
                }

                input.addEventListener('input', function() {
                    localStorage.setItem(key, this.value);
                });
            });
        }

        // Helper function to handle saving for CHECKBOX inputs
        function setupCheckboxSave(selector, storagePrefix) {
            const checkboxes = document.querySelectorAll(selector);
            
            checkboxes.forEach((box, index) => {
                const key = storagePrefix + index;
                const savedValue = localStorage.getItem(key);
                
                if (savedValue === 'true') {
                    box.checked = true;
                }

                box.addEventListener('change', function() {
                    localStorage.setItem(key, this.checked);
                });
            });
        }

        // 1. Setup save for Main Task items
        setupAutoSave('.task-input', 'checklist_task_');

        // 2. Setup save for Header Fields (Hours, Artist values, etc)
        setupAutoSave('.header-input', 'checklist_header_');

        // 3. Setup save for Editable Labels (Artist, Date, Event, etc)
        setupAutoSave('.header-label-input', 'checklist_label_');

        // 4. Setup save for Checkboxes
        setupCheckboxSave('.task-checkbox', 'checklist_box_');

    </script>

</body>
</html>